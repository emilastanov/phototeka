!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],n):n(t["redux-zero"]={},t.preact)}(this,function(t,i){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function p(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var s=function(){return(s=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function o(t,n){for(var e in t)if(t[e]!==n[e])return!1;for(var e in n)if(!(e in t))return!1;return!0}var u,n=(p(e,u=i.Component),e.prototype.componentWillMount=function(){this.unsubscribe=this.context.store.subscribe(this.update)},e.prototype.componentWillUnmount=function(){this.unsubscribe(this.update)},e.prototype.componentWillReceiveProps=function(t,n){var e=this.getProps(t,n);o(e,this.state)||this.setState(e)},e.prototype.getProps=function(t,n){var e=t.mapToProps,r=n.store&&n.store.getState()||{};return e?e(r,t):r},e.prototype.getActions=function(){return function(o,i,t){function n(r){e[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=o[r];return"function"==typeof i.middleware?i.middleware(i,e,t):function(t,n){if(null!=n){if(n.then)return n.then(t.setState);t.setState(n)}}(i,e.apply(void 0,[i.getState()].concat(t)))}}o="function"==typeof o?o(i,t):o;var e={};for(var r in o)n(r);return e}(this.props.actions,this.context.store,this.props)},e.prototype.render=function(t,n,e){var r=t.children,o=e.store;return(r&&r[0]||r)(s({store:o},n,this.actions))},e);function e(t,n){var e=u.call(this,t,n)||this;return e.update=function(){var t=e.getProps(e.props,e.context);o(t,e.state)||e.setState(t)},e.state=e.getProps(t,n),e.actions=e.getActions(),e}var c=n;var a,f=(p(h,a=i.Component),h.prototype.getChildContext=function(){return{store:this.props.store}},h.prototype.render=function(){return this.props.children&&this.props.children[0]||this.props.children},h);function h(){return null!==a&&a.apply(this,arguments)||this}t.connect=function(r,o){return void 0===o&&(o={}),function(e){return p(t,n=i.Component),t.prototype.render=function(){var n=this.props;return i.h(c,s({},n,{mapToProps:r,actions:o}),function(t){return i.h(e,s({},t,n))})},t;function t(){return null!==n&&n.apply(this,arguments)||this}var n}},t.Provider=f,t.Connect=n,Object.defineProperty(t,"__esModule",{value:!0})});
